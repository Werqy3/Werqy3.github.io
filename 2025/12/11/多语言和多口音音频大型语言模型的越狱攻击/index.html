<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Werqy3&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Werqy3&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Werqy3&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="多语言和多口音音频大型语言模型的越狱攻击"><meta property="og:type" content="blog"><meta property="og:title" content="Werqy3&#039;s Blog"><meta property="og:url" content="http://example.com/2025/12/11/%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%92%8C%E5%A4%9A%E5%8F%A3%E9%9F%B3%E9%9F%B3%E9%A2%91%E5%A4%A7%E5%9E%8B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%B6%8A%E7%8B%B1%E6%94%BB%E5%87%BB/"><meta property="og:site_name" content="Werqy3&#039;s Blog"><meta property="og:description" content="多语言和多口音音频大型语言模型的越狱攻击"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376208472-fee41424-28d9-468b-a572-f4bca8d9cb72.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375941678-7eb43449-cecb-4103-907c-7c1fb578af66.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375953305-0aadf2c5-732d-4765-83fd-b00ae449cbf0.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375971246-914830ae-410f-41bb-9770-eaa9b70e80ae.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375887993-2461e2b0-48dc-4f2d-ac35-d843949bf4e5.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375908764-f28b9248-63d2-4a74-a8cb-82777f7888f6.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375997075-e53f37a1-1297-4f39-98c3-3bcc9a6a067c.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376002510-308da3b9-8194-4d4e-89ff-df10e941317a.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376025328-4889c596-2247-44f2-9df1-f35001a3e452.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376018041-357cfc06-b37b-424c-8f1b-047bc2c5e24b.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376053550-c3a22375-858d-45ac-8fba-53bb8fa89dbd.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376059946-351ca10e-db45-4ae0-b1e4-771a5370c64d.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376067746-e7b0e87d-2740-49cd-88c5-d378e4335b9b.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376074439-c792b493-3fd4-4d42-8498-5579873b52b4.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376096754-16d6fd10-c1ae-4788-868d-6ff163a474be.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376120361-d4fc062b-6f08-400d-9e76-bf9ede4d7702.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376151384-b8b903a2-76e7-49a5-b606-5468522f4124.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744436085470-dc931b42-7513-4846-9b40-acb3a1e1cb05.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437508729-5edc79d0-8a19-46c1-b0d2-e87fa5886f17.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437544597-10c74d76-42fd-4202-860e-58615c3a571a.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437551665-a454f2b1-8243-4676-b565-ed7d3d2f84ee.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437588680-bb5e6256-586e-4fd0-ba15-09697bd675c3.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437635539-0cb486db-d33a-4010-8336-770957a2cfde.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437643293-1623f50f-7272-4b6f-b307-0e89ef468aa8.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437687293-25d77a10-46ca-4f90-be2a-1ab821b2b8b1.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437700372-cf84b1d5-c0cf-482f-8bf0-98d918af40a0.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437649638-854c4fff-0d15-4bc8-ad06-ad5a97a7967f.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437715088-1a3ab55f-15af-4064-bc34-69ef8cb8d4e2.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745742350981-a0ff2725-adcd-4d79-80db-0441a0d2c433.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745742757951-8c32e8d7-bfed-4091-9c7e-01ca279ab0f6.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745734061119-56d5f670-390a-431b-9592-5da072eae671.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745734200811-bf323747-3dba-4963-bc95-bf4087564d68.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745742394165-b7d3d2bb-168f-49ca-924a-e6311cf2e128.png"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745743451588-cae4e921-d7a9-4666-8456-26dd31978799.png"><meta property="article:published_time" content="2025-12-11T06:51:44.003Z"><meta property="article:modified_time" content="2025-12-11T06:52:41.116Z"><meta property="article:author" content="Werqy3"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376208472-fee41424-28d9-468b-a572-f4bca8d9cb72.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2025/12/11/%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%92%8C%E5%A4%9A%E5%8F%A3%E9%9F%B3%E9%9F%B3%E9%A2%91%E5%A4%A7%E5%9E%8B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%B6%8A%E7%8B%B1%E6%94%BB%E5%87%BB/"},"headline":"Werqy3's Blog","image":["https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376208472-fee41424-28d9-468b-a572-f4bca8d9cb72.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375941678-7eb43449-cecb-4103-907c-7c1fb578af66.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375953305-0aadf2c5-732d-4765-83fd-b00ae449cbf0.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375971246-914830ae-410f-41bb-9770-eaa9b70e80ae.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375887993-2461e2b0-48dc-4f2d-ac35-d843949bf4e5.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375908764-f28b9248-63d2-4a74-a8cb-82777f7888f6.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375997075-e53f37a1-1297-4f39-98c3-3bcc9a6a067c.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376002510-308da3b9-8194-4d4e-89ff-df10e941317a.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376025328-4889c596-2247-44f2-9df1-f35001a3e452.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376018041-357cfc06-b37b-424c-8f1b-047bc2c5e24b.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376053550-c3a22375-858d-45ac-8fba-53bb8fa89dbd.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376059946-351ca10e-db45-4ae0-b1e4-771a5370c64d.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376067746-e7b0e87d-2740-49cd-88c5-d378e4335b9b.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376074439-c792b493-3fd4-4d42-8498-5579873b52b4.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376096754-16d6fd10-c1ae-4788-868d-6ff163a474be.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376120361-d4fc062b-6f08-400d-9e76-bf9ede4d7702.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376151384-b8b903a2-76e7-49a5-b606-5468522f4124.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744436085470-dc931b42-7513-4846-9b40-acb3a1e1cb05.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437508729-5edc79d0-8a19-46c1-b0d2-e87fa5886f17.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437544597-10c74d76-42fd-4202-860e-58615c3a571a.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437551665-a454f2b1-8243-4676-b565-ed7d3d2f84ee.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437588680-bb5e6256-586e-4fd0-ba15-09697bd675c3.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437635539-0cb486db-d33a-4010-8336-770957a2cfde.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437643293-1623f50f-7272-4b6f-b307-0e89ef468aa8.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437687293-25d77a10-46ca-4f90-be2a-1ab821b2b8b1.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437700372-cf84b1d5-c0cf-482f-8bf0-98d918af40a0.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437649638-854c4fff-0d15-4bc8-ad06-ad5a97a7967f.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437715088-1a3ab55f-15af-4064-bc34-69ef8cb8d4e2.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1745742350981-a0ff2725-adcd-4d79-80db-0441a0d2c433.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1745742757951-8c32e8d7-bfed-4091-9c7e-01ca279ab0f6.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1745734061119-56d5f670-390a-431b-9592-5da072eae671.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1745734200811-bf323747-3dba-4963-bc95-bf4087564d68.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1745742394165-b7d3d2bb-168f-49ca-924a-e6311cf2e128.png","https://cdn.nlark.com/yuque/0/2025/png/44876878/1745743451588-cae4e921-d7a9-4666-8456-26dd31978799.png"],"datePublished":"2025-12-11T06:51:44.003Z","dateModified":"2025-12-11T06:52:41.116Z","author":{"@type":"Person","name":"Werqy3"},"publisher":{"@type":"Organization","name":"Werqy3's Blog","logo":{"@type":"ImageObject","url":"http://example.com/img/logo.svg"}},"description":"多语言和多口音音频大型语言模型的越狱攻击"}</script><link rel="canonical" href="http://example.com/2025/12/11/%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%92%8C%E5%A4%9A%E5%8F%A3%E9%9F%B3%E9%9F%B3%E9%A2%91%E5%A4%A7%E5%9E%8B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%B6%8A%E7%8B%B1%E6%94%BB%E5%87%BB/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="test" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" referrerpolicy="no-referrer" alt="Werqy3&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-12-11T06:51:44.003Z" title="2025/12/11 14:51:44">2025-12-11</time>发表</span><span class="level-item"><time dateTime="2025-12-11T06:52:41.116Z" title="2025/12/11 14:52:41">2025-12-11</time>更新</span><span class="level-item">42 分钟读完 (大约6225个字)</span></div></div><div class="content"><h1 id="多语言和多口音音频大型语言模型的越狱攻击"><a href="#多语言和多口音音频大型语言模型的越狱攻击" class="headerlink" title="多语言和多口音音频大型语言模型的越狱攻击"></a>多语言和多口音音频大型语言模型的越狱攻击</h1><span id="more"></span>

<p>本文首发于奇安信攻防社区：<a target="_blank" rel="noopener" href="https://forum.butian.net/share/4290">https://forum.butian.net/share/4290</a></p>
<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>在人工智能技术飞速发展的今天，语音交互已逐渐成为人机沟通的重要方式。从智能助手如Siri和Alexa，到多语言实时翻译系统，音频大语言模型（ LALMs）正以前所未有的速度渗透到我们的日常生活中。这些模型不仅能够理解和生成自然语言，还能处理多种语言的语音输入，实现跨语言的无缝交流。然而，随着这些模型的广泛应用，其安全性问题也日益凸显。研究人员发现，即使内置了安全检查，语音大模型在对抗性攻击面前表现得极为脆弱。通过对音频输入进行人类难以察觉的微小篡改，攻击者就能完全改变大模型的行为，使其生成有害、危险或不道德的响应 。本文将深入探讨多语言音频模型在实际应用中面临的安全挑战，特别是音频越狱攻击的机制与影响。我们将学习攻击者如何利用模型的漏洞，通过精心设计的音频输入绕过安全机制，诱导模型生成不当内容。</p>
<h1 id="AdvWave攻击框架"><a href="#AdvWave攻击框架" class="headerlink" title="AdvWave攻击框架"></a>AdvWave攻击框架</h1><p>AdvWave是针对LALMs的第一个越狱攻击框架，使用双相优化（Dual-Phase Optimization）技术，解决了音频编码器中的<strong>梯度破碎问题</strong>，同时提高了攻击效率并确保了隐蔽性。</p>
<h4 id="梯度破碎问题："><a href="#梯度破碎问题：" class="headerlink" title="梯度破碎问题："></a>梯度破碎问题：</h4><p>在LALM中，音频波形首先通过音频编码器映射到中间特征空间，并通过K-means聚类对音频帧进行标记。这一过程引入了不可微的离散化操作，打破了反向传播的梯度流动，导致梯度消失</p>
<p>这个框架包含了两个主要阶段：</p>
<ol>
<li><strong>第一阶段：优化音频token向量</strong></li>
<li><strong>第二阶段：优化音频波形</strong></li>
</ol>
<p>双相优化（Dual-Phase Optimization）技术可如下图展示：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376208472-fee41424-28d9-468b-a572-f4bca8d9cb72.png" referrerpolicy="no-referrer" alt="null"></p>
<h3 id="阶段一优化：音频token向量优化"><a href="#阶段一优化：音频token向量优化" class="headerlink" title="阶段一优化：音频token向量优化"></a><strong>阶段一优化：音频token向量优化</strong></h3><p>在第一阶段，AdvWave框架优化的是音频的<strong>token向量</strong>。具体步骤如下：</p>
<ol>
<li><strong>对抗性损失优化</strong>：</li>
</ol>
<ul>
<li><strong>目标</strong>：优化音频token向量<img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375941678-7eb43449-cecb-4103-907c-7c1fb578af66.png" referrerpolicy="no-referrer" alt="null">，使得通过音频-语言模型（LALM）生成的响应能够接近攻击者期望的目标响应 <img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375953305-0aadf2c5-732d-4765-83fd-b00ae449cbf0.png" referrerpolicy="no-referrer" alt="null">。</li>
<li><strong>过程</strong>：通过<strong>对抗性损失函数</strong><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375971246-914830ae-410f-41bb-9770-eaa9b70e80ae.png" referrerpolicy="no-referrer" alt="null"> 最小化模型输出与目标响应之间的误差，使得生成的音频能够引发模型的目标响应。</li>
</ul>
<ol>
<li><strong>音频token化</strong>：</li>
</ol>
<ul>
<li><strong>音频编码器</strong>将输入音频转化为特征空间，然后通过<strong>tokenization模块</strong>（即离散化）将这些特征映射为音频token。这一过程中，由于<strong>K-Means聚类</strong>的使用，存在不可微分操作，这导致了<strong>梯度破碎问题</strong>。为了解决这个问题，第一阶段将音频token视为决策变量，而非直接对原始音频波形进行优化。</li>
</ul>
<p><strong>优化公式</strong>：</p>
<ul>
<li>在第一阶段，优化目标是最小化对抗性损失：</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375887993-2461e2b0-48dc-4f2d-ac35-d843949bf4e5.png" referrerpolicy="no-referrer" alt="null"></p>
<p>其中，<img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375908764-f28b9248-63d2-4a74-a8cb-82777f7888f6.png" referrerpolicy="no-referrer" alt="null"> 是优化后的音频token向量。</p>
<h3 id="阶段二优化：音频波形优化"><a href="#阶段二优化：音频波形优化" class="headerlink" title="阶段二优化：音频波形优化"></a><strong>阶段二优化：音频波形优化</strong></h3><p>在第二阶段，优化过程转向<strong>音频波形</strong><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744375997075-e53f37a1-1297-4f39-98c3-3bcc9a6a067c.png" referrerpolicy="no-referrer" alt="null">，以确保其生成的token向量在第一阶段优化后与目标token向量 <img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376002510-308da3b9-8194-4d4e-89ff-df10e941317a.png" referrerpolicy="no-referrer" alt="null"> 匹配。</p>
<ol>
<li><strong>保留损失（Retention Loss）</strong>：</li>
</ol>
<ul>
<li><strong>目标</strong>：确保优化后的音频波形 <img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376025328-4889c596-2247-44f2-9df1-f35001a3e452.png" referrerpolicy="no-referrer" alt="null"> 与第一阶段优化得到的目标音频token向量 <img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376018041-357cfc06-b37b-424c-8f1b-047bc2c5e24b.png" referrerpolicy="no-referrer" alt="null"> 保持一致。这是通过定义<strong>保留损失</strong><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376053550-c3a22375-858d-45ac-8fba-53bb8fa89dbd.png" referrerpolicy="no-referrer" alt="null"> 来实现的。</li>
<li><strong>损失函数</strong>：使用三元损失（Triplet Loss）来确保每个音频帧的特征接近目标token的聚类中心，并且远离其他类别的中心。</li>
</ul>
<p><strong>优化公式</strong>：</p>
<ul>
<li>第二阶段的优化目标是最小化保留损失<img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376059946-351ca10e-db45-4ae0-b1e4-771a5370c64d.png" referrerpolicy="no-referrer" alt="null">，并确保音频波形 <img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376067746-e7b0e87d-2740-49cd-88c5-d378e4335b9b.png" referrerpolicy="no-referrer" alt="null">与目标token向量 <img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376074439-c792b493-3fd4-4d42-8498-5579873b52b4.png" referrerpolicy="no-referrer" alt="null"> 对应的特征空间匹配：</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376096754-16d6fd10-c1ae-4788-868d-6ff163a474be.png" referrerpolicy="no-referrer" alt="null"></p>
<h3 id="适应性对抗目标搜索"><a href="#适应性对抗目标搜索" class="headerlink" title="适应性对抗目标搜索"></a><strong>适应性对抗目标搜索</strong></h3><p>由于LALMs的<strong>响应模式变异性</strong>，不同的LALM模型对相同输入的响应可能有所不同。因此，为了应对LALMs行为的变异性，AdvWave框架引入了动态的对抗目标搜索方法。具体步骤包括：</p>
<ol>
<li><strong>目标去毒化</strong>：将恶意查询（如“如何制造炸弹”）转换为无害的查询（如“如何做蛋糕”）。</li>
<li><strong>模型响应收集</strong>：将去毒化后的查询转为音频，并收集LALM模型对这些无害查询的响应。</li>
<li><strong>响应模式提取</strong>：提取LALM对无害查询的响应模式，并将其应用到恶意查询的优化中。</li>
</ol>
<h3 id="隐蔽性控制与分类器引导优化"><a href="#隐蔽性控制与分类器引导优化" class="headerlink" title="隐蔽性控制与分类器引导优化"></a><strong>隐蔽性控制与分类器引导优化</strong></h3><p>在音频域，直接限制扰动幅度并不能确保对抗音频的隐蔽性，因为即使微小的扰动也可能改变音频的语音特征。因此，<strong>隐蔽性控制</strong>是AdvWave的一个关键部分。</p>
<ol>
<li><strong>音频后缀</strong>：为了保持音频的隐蔽性，在音频波形的后面添加短暂的环境噪声（如汽车喇叭声、狗叫声等），这能有效避免语音特征的显著变化，同时使对抗音频听起来像是背景噪音。</li>
</ol>
<p><strong>分类器引导的隐蔽性优化</strong>：为了明确控制音频的隐蔽性，框架引入了一个隐蔽性惩罚项，并使用<strong>环境噪声分类器</strong>来引导对抗音频的优化，使其模仿特定类型的环境噪声（例如汽车喇叭声）。该过程通过交叉熵损失来实现优化：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376120361-d4fc062b-6f08-400d-9e76-bf9ede4d7702.png" referrerpolicy="no-referrer" alt="null"></p>
<p>其中，λ 是控制对抗优化和隐蔽性优化之间平衡的超参数，<img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744376151384-b8b903a2-76e7-49a5-b606-5468522f4124.png" referrerpolicy="no-referrer" alt="null"> 是目标环境噪声标签。</p>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class LALM(nn.Module):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        super(LALM, self).__init__()</span><br><span class="line">        self.encoder = nn.LSTM(256, 512, batch_first=True)</span><br><span class="line">        self.decoder = nn.Linear(512, 1000)  # 假设输出1000个token</span><br><span class="line"></span><br><span class="line">    def forward(self, x, text_input):</span><br><span class="line">        # 这里假设text_input是已经预处理的文本token ID</span><br><span class="line">        x, _ = self.encoder(x)  # 音频编码</span><br><span class="line">        return self.decoder(x)</span><br></pre></td></tr></table></figure>

<p>定义了一个LALM类，继承自nn.Module。这是模拟音频语言模型的，包含一个LSTM编码器和一个线性解码器。LSTM用于处理音频特征，解码器将LSTM的输出映射到文本token空间。音频文件需要先转换为特征向量，然后分帧处理，每个帧对应一个256维的特征向量。这些特征向量序列会被输入到LSTM中进行处理，最终解码为文本token。这里可以将音频信号转换为文本输出的过程，比如语音识别或语音生成文本的任务。</p>
<p><strong>LALM类</strong>本质上是模拟LALM模型对音频和文本输入的处理，音频首先通过编码器转化为特征向量，然后生成最终的输出（音频或文本），为后续生成对抗样本提供基础</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def load_audio(file_path):</span><br><span class="line">    # 这里简化音频加载，实际上需要根据需求进行处理</span><br><span class="line">    y = np.random.randn(16000)  # 假设的随机音频信号</span><br><span class="line">    return torch.tensor(y).unsqueeze(0)  # 增加批次维度</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>load</strong>**_**<strong>audio</strong>函数负责加载音频数据。此处通过生成一个随机的音频信号代替实际的音频数据加载</li>
<li><code>unsqueeze(0)</code>的作用是增加一个批次维度，使得音频数据可以与PyTorch模型兼容（即将数据转换为 <code>[batch_size, seq_len]</code> 的形式）。</li>
<li>该函数是音频预处理的一部分，用于加载音频文件并将其转换为张量格式，方便后续传入模型中进行处理</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">def generate_adversarial_example(model, audio, target_label, epsilon=0.01, num_steps=10):</span><br><span class="line">    audio = audio.requires_grad_(True)</span><br><span class="line">    for _ in range(num_steps):</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        output = model(audio, target_label)</span><br><span class="line">        loss = criterion(output, target_label)</span><br><span class="line">        loss.backward()</span><br><span class="line"></span><br><span class="line">        grad_sign = audio.grad.data.sign()</span><br><span class="line">        audio.data = audio.data + epsilon * grad_sign</span><br><span class="line">        audio.data = torch.clamp(audio.data, min=-1.0, max=1.0)  # 限制扰动范围</span><br><span class="line"></span><br><span class="line">        # 清除梯度</span><br><span class="line">        audio.grad.zero_()</span><br><span class="line">    return audio</span><br></pre></td></tr></table></figure>

<p>这是一个实现PGD（投影梯度下降）优化的函数，用于生成对抗音频。PGD是常用的对抗样本生成方法，它基于梯度信息，通过多次迭代优化输入音频，使得模型生成错误的输出。<br>这个函数的参数有model, audio, target_label，还有epsilon和num_steps两个默认参数。这个函数的目标是根据目标标签生成对抗性的音频样本。对抗攻击通常是指对输入做小的扰动，使得模型输出错误的结果。这里的target_label就是希望模型错误预测的目标类别。首先将audio设置为需要梯度，这样在后续的反向传播中可以计算梯度</p>
<ul>
<li><code>**audio.requires_grad_(True)**</code>：使得音频张量支持梯度计算，以便在优化过程中调整音频数据。</li>
<li><code>**loss.backward()**</code>：反向传播，计算损失函数对音频输入的梯度。</li>
<li><code>**grad_sign = audio.grad.data.sign()**</code>：计算梯度符号，表示沿梯度上升方向更新音频。</li>
<li><code>**audio.data = audio.data + epsilon * grad_sign**</code>：根据梯度更新音频输入。</li>
<li><code>**torch.clamp(audio.data, min=-1.0, max=1.0)**</code>：对音频数据进行裁剪，确保音频信号在有效范围内（通常音频数据的范围是 [-1, 1]）。</li>
<li>这个过程是对抗性攻击的核心。通过PGD算法，攻击者不断调整音频信号，使其符合攻击目标，即引导模型生成特定的恶意响应。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def stealthiness_optimization(audio, target_label, classifier, epsilon=0.01):</span><br><span class="line">    audio = audio.requires_grad_(True)</span><br><span class="line">    for _ in range(10):</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        output = classifier(audio)</span><br><span class="line">        loss = nn.CrossEntropyLoss()(output, target_label)</span><br><span class="line">        loss.backward()</span><br><span class="line"></span><br><span class="line">        grad_sign = audio.grad.data.sign()</span><br><span class="line">        audio.data = audio.data + epsilon * grad_sign</span><br><span class="line">        audio.data = torch.clamp(audio.data, min=-1.0, max=1.0)</span><br><span class="line"></span><br><span class="line">        audio.grad.zero_()</span><br><span class="line">    return audio</span><br></pre></td></tr></table></figure>

<p>该函数用于优化对抗音频的<strong>隐蔽性</strong>。目标是通过<strong>分类器引导优化</strong>确保生成的音频在人耳上难以察觉，且不会改变原始音频的语义特征。</p>
<ul>
<li><code>**output = classifier(audio)**</code>：对生成的对抗音频进行分类，分类器评估音频的隐蔽性。</li>
<li><code>**loss = nn.CrossEntropyLoss()(output, target_label)**</code>：计算音频与目标标签之间的分类误差。</li>
<li><code>**grad_sign = audio.grad.data.sign()**</code>：根据梯度信息更新音频，优化音频的隐蔽性。</li>
<li>隐蔽性优化是<strong>AdvWave</strong>攻击框架的核心之一，确保生成的对抗音频不会被人耳察觉。通过<strong>分类器引导的优化</strong>，攻击者能够使音频看起来像是背景噪声，而不是刻意的扰动。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Classifier(nn.Module):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        super(Classifier, self).__init__()</span><br><span class="line">        self.fc = nn.Linear(512, 10)  # 假设有10个环境噪声类别</span><br><span class="line"></span><br><span class="line">    def forward(self, x):</span><br><span class="line">        return self.fc(x)</span><br></pre></td></tr></table></figure>

<p><strong>Classifier</strong> 类是一个简化的<strong>环境噪声分类器</strong>，用于帮助评估对抗音频的隐蔽性。它假设对抗音频可以通过某些环境噪声（如汽车喇叭、狗叫声等）进行归类。</p>
<ul>
<li><code>**self.fc = nn.Linear(512, 10)**</code>：一个全连接层，假设音频特征的维度是512，分类任务有10个类别（例如，不同的环境噪声类别）。</li>
<li><strong>Classifier</strong> 是优化隐蔽性的一部分，帮助指导对抗音频的生成，使其具有更高的隐蔽性。通过引导音频与环境噪声进行相似性匹配，攻击者能够确保对抗音频在人耳上不易察觉。</li>
</ul>
<p><strong>代码流程：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 初始化模型</span><br><span class="line">model = LALM()</span><br><span class="line">classifier = Classifier()</span><br><span class="line"></span><br><span class="line"># 加载原始音频</span><br><span class="line">clean_audio = load_audio(&quot;音频&quot;)</span><br><span class="line"></span><br><span class="line"># 生成对抗样本（欺骗LALM）</span><br><span class="line">target_label = 3  # 假设目标指令对应标签3</span><br><span class="line">adv_audio = generate_adversarial_example(model, clean_audio, target_label)</span><br><span class="line"></span><br><span class="line"># 优化隐蔽性（欺骗Classifier）</span><br><span class="line">noise_label = 5   # 假设目标噪声类别为5（如&quot;机械声&quot;）</span><br><span class="line">stealth_audio = stealthiness_optimization(adv_audio, classifier, noise_label)</span><br><span class="line"></span><br><span class="line"># 验证攻击效果</span><br><span class="line">malicious_text = model(stealth_audio, None)  # 输出恶意指令</span><br></pre></td></tr></table></figure>

<p>Multi-AudioJail—一种新型的音频越狱攻击,利用多语言和多口音的音频输入,通过声学对抗扰动增强，使得模型产生不符合预期或不安全的输出。下图就很形象地描述了此攻击：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744436085470-dc931b42-7513-4846-9b40-acb3a1e1cb05.png" referrerpolicy="no-referrer" alt="null"></p>
<p><strong>(a) 文本攻击（多语言）</strong>：</p>
<p>用户提供多种语言（英语、德语、法语、葡萄牙语）的文本，内容涉及如何合法避税。然后，AI模型接收并处理输入的文本。模型根据输入的文本给出响应，拒绝（“抱歉，作为AI模型，我无法协助您”）</p>
<p><strong>(b) 音频攻击（多语言&#x2F;口音）</strong>：</p>
<p>与文本攻击相同，用户提供的多语言音频输入（英语、德语、法语、葡萄牙语）也涉及如何合法避税的内容。AI模型处理音频输入。类似于文本攻击，模型可能会拒绝该请求或根据音频的不同口音给出危险的响应，或者提供其他的可接受回答。</p>
<p><strong>(c) 音频扰动攻击（多语言&#x2F;口音）</strong>：</p>
<p>用户再次提供音频输入，但这次音频被施加了扰动，如“回声效应”、“回响效应”或“低语效应”。用户可以选择不同类型的音频扰动，可能会诱导模型产生特定的输出。模型对扰动后的音频做出回应，这可能会绕过某些安全过滤器，产生危险或不希望出现的输出。</p>
<h1 id="Multi-AudioJail概述"><a href="#Multi-AudioJail概述" class="headerlink" title="Multi-AudioJail概述"></a>Multi-AudioJail概述</h1><p><strong>Multi-AudioJail攻击</strong>是一种针对语音模型的攻击方法，旨在通过多种音频扰动技巧欺骗模型并绕过其安全性或内容过滤机制。这个攻击方法利用了音频输入的扰动，通过不同的音频变化（如音调、回声、低语等）影响模型的响应，使得模型产生不符合预期或不安全的输出。</p>
<h2 id="音频扰动"><a href="#音频扰动" class="headerlink" title="音频扰动"></a>音频扰动</h2><ul>
<li><strong>混响效应</strong>通过模拟环境中声音反射的方式，造成音频信号的模糊和延迟，适用于模拟房间、铁路等环境。</li>
<li><strong>回声效应</strong>通过延迟和衰减的副本来产生回声，具有明显的时间延迟特征。</li>
<li><strong>低语效应</strong>则通过降低信号强度和频率衰减模拟低语的声音特性</li>
</ul>
<h3 id="混响效应（Reverberation-Effect）："><a href="#混响效应（Reverberation-Effect）：" class="headerlink" title="混响效应（Reverberation Effect）："></a><strong>混响效应（Reverberation Effect）</strong>：</h3><p>混响是通过对音频信号应用特定的冲击响应（Impulse Response, IR）来模拟声音在特定环境中的反射。例如，在一间房间或铁路环境中，声音会反射并产生回声，使声音变得模糊和延迟。</p>
<p><strong>数学公式</strong>：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437508729-5edc79d0-8a19-46c1-b0d2-e87fa5886f17.png" referrerpolicy="no-referrer" alt="null"></p>
<p>其中，x(t) 是原始音频信号，<img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437544597-10c74d76-42fd-4202-860e-58615c3a571a.png" referrerpolicy="no-referrer" alt="null"> 是特定声学环境的冲击响应，<img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437551665-a454f2b1-8243-4676-b565-ed7d3d2f84ee.png" referrerpolicy="no-referrer" alt="null"> 是经过混响处理后的信号</p>
<h3 id="回声效应（Echo-Effect）："><a href="#回声效应（Echo-Effect）：" class="headerlink" title="回声效应（Echo Effect）："></a><strong>回声效应（Echo Effect）</strong>：</h3><p>回声效应通过延迟和衰减原始信号的副本来产生。该效果在声音信号中创建一个明显的重复部分，使得声音在时间上呈现出延迟的重复。</p>
<p><strong>数学公式</strong>：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437588680-bb5e6256-586e-4fd0-ba15-09697bd675c3.png" referrerpolicy="no-referrer" alt="null"></p>
<p>其中，α 是衰减因子（通常设为 0.3），Δt 是原始信号和回声信号之间的延迟时间（大约 0.2 秒）。与混响不同，回声效应不会通过冲击响应（IR）生成连续的重叠反射，而是通过一个单独的、离散的重复来表现。</p>
<h3 id="低语效应（Whisper-Effect）："><a href="#低语效应（Whisper-Effect）：" class="headerlink" title="低语效应（Whisper Effect）："></a><strong>低语效应（Whisper Effect）</strong>：</h3><p>低语效应通过三阶段转换模拟低语的声学特性，降低音频信号的强度，模仿低语的特征。</p>
<p><strong>幅度衰减</strong>：首先将原始音频信号的幅度降低，以模仿低语的较低强度。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437635539-0cb486db-d33a-4010-8336-770957a2cfde.png" referrerpolicy="no-referrer" alt="null"></p>
<p>其中，γ 是衰减因子（通常设为 0.3），用于降低音频的幅度。</p>
<p><strong>频率衰减</strong>：接下来，音频信号的频谱会通过低通滤波器进行高频衰减，进一步模拟低语的效果。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437643293-1623f50f-7272-4b6f-b307-0e89ef468aa8.png" referrerpolicy="no-referrer" alt="null"></p>
<p>其中，<img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437687293-25d77a10-46ca-4f90-be2a-1ab821b2b8b1.png" referrerpolicy="no-referrer" alt="null"> 是软化后的音频信号的频域表示，<img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437700372-cf84b1d5-c0cf-482f-8bf0-98d918af40a0.png" referrerpolicy="no-referrer" alt="null"> 是低通滤波器，表示频率衰减效果。低通滤波器的公式为：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437649638-854c4fff-0d15-4bc8-ad06-ad5a97a7967f.png" referrerpolicy="no-referrer" alt="null"></p>
<p>其中，<img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1744437715088-1a3ab55f-15af-4064-bc34-69ef8cb8d4e2.png" referrerpolicy="no-referrer" alt="null">是截止频率，n 是衰减因子，决定了高频衰减的程度</p>
<p><strong>代码实现：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 混响效应 - 使用真实的冲击响应（Impulse Response）</span><br><span class="line">def apply_reverb(audio, ir_file, sr):</span><br><span class="line">    &quot;&quot;&quot;应用混响效果&quot;&quot;&quot;</span><br><span class="line">    # 读取冲击响应IR</span><br><span class="line">    ir, _ = librosa.load(ir_file, sr=sr)</span><br><span class="line">    # 使用冲击响应与原始音频进行卷积</span><br><span class="line">    reverb_audio = convolve(audio, ir, mode=&#x27;full&#x27;)</span><br><span class="line">    return reverb_audio[:len(audio)]  # 保持与原始音频相同的长度</span><br></pre></td></tr></table></figure>

<p>该函数参数包括音频数据<code>audio</code>，冲击响应文件路径<code>ir_file</code>，以及采样率<code>sr</code>。接下来是读取冲击响应文件的部分，使用<code>librosa.load</code>加载IR文件，并获取其音频数据和采样率。然后是卷积操作：<code>reverb_audio = convolve(audio, ir, mode=&#39;full&#39;)</code>。这里使用<code>scipy.signal.convolve</code>函数对原始音频和IR进行卷积，生成带有混响效果的音频。<code>mode=&#39;full&#39;</code>会使得卷积后的音频长度变长，因此需要截取前<code>len(audio)</code>的部分，以保持与原始音频相同的长度。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def apply_echo(audio, delay, attenuation, sr):</span><br><span class="line">    &quot;&quot;&quot;应用回声效果&quot;&quot;&quot;</span><br><span class="line">    echo_audio = np.copy(audio)</span><br><span class="line">    delay_samples = int(delay * sr)  # 延迟时间转为样本数</span><br><span class="line">    echo_audio[delay_samples:] += attenuation * audio[:-delay_samples]</span><br><span class="line">    return echo_audio</span><br></pre></td></tr></table></figure>

<p>该函数接受四个参数：<code>audio</code>（音频数据）、<code>delay</code>（延迟时间）、<code>attenuation</code>（衰减系数）和<code>sr</code>（采样率）。函数的目的是给音频添加回声效果。代码的主要步骤是复制原始音频，然后根据延迟时间和衰减系数，在特定位置叠加衰减后的原始音频，从而生成回声。</p>
<ol>
<li><code>echo_audio = np.copy(audio)</code>：这里使用NumPy的<code>copy</code>方法复制原始音频数据，确保在修改时不影响原始数据。这一步很重要，因为直接操作原数组可能会导致数据被意外修改。</li>
<li><code>delay_samples = int(delay * sr)</code>：将延迟时间（以秒为单位）转换为样本数。例如，如果延迟是0.5秒，采样率是44100Hz，那么延迟样本数就是22050个样本。确保了时间与样本数的正确转换。</li>
<li><code>echo_audio[delay_samples:] += attenuation * audio[:-delay_samples]</code>：这是实现回声的核心步骤。这里，从<code>delay_samples</code>之后的位置开始，将原始音频的前<code>len(audio) - delay_samples</code>个样本乘以衰减系数后叠加到<code>echo_audio</code>上。这样，原始音频在延迟一定时间后以衰减的形式再次出现，形成回声效果。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def apply_whisper(audio, gamma=0.3, cutoff_freq=5000, sr=22050):</span><br><span class="line">    &quot;&quot;&quot;应用低语效果&quot;&quot;&quot;</span><br><span class="line">    # 幅度衰减</span><br><span class="line">    audio = gamma * audio</span><br><span class="line"></span><br><span class="line">    # 频率衰减 - 使用低通滤波器</span><br><span class="line">    nyquist = 0.5 * sr</span><br><span class="line">    normal_cutoff = cutoff_freq / nyquist</span><br><span class="line">    b, a = butter(1, normal_cutoff, btype=&#x27;low&#x27;, analog=False)</span><br><span class="line">    whispered_audio = lfilter(b, a, audio)</span><br><span class="line">    return whispered_audio</span><br></pre></td></tr></table></figure>

<p>该函数接受四个参数：<code>audio</code>：原始音频信号。<code>gamma</code>：幅度衰减因子，用于减少音频的强度，模拟低语的低音量。<code>cutoff_freq</code>：低通滤波器的截止频率，表示要衰减的高频部分。通常，低语会丧失高频部分。<code>sr</code>：采样率，用于计算滤波器的规范截止频率。<br>通过将 <code>audio</code> 乘以衰减因子 <code>gamma</code>，降低音频的幅度来模拟低语的音量。使用<code>scipy.signal.butter</code> 创建一个低通滤波器，该滤波器会在设定的截止频率（<code>cutoff_freq</code>）处减少音频信号的高频成分。使用 <code>scipy.signal.lfilter</code> 对信号应用低通滤波器，以模拟低语中的高频衰减。<br>上述代码实现了混响、回声和低语效果，并通过卷积和滤波技术处理音频信号。每个效应都有独立的函数，并能够加载和保存音频文件。通过适当的参数调整（如延迟时间、衰减因子和滤波器截止频率），可以根据需要模拟不同的声学环境和效果。<br><strong>实测</strong>：<br>这里使用混响效果来测试，首先准备一段音频其内容为我很开心，经过混响效应后被识别为我很难过</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745742350981-a0ff2725-adcd-4d79-80db-0441a0d2c433.png" referrerpolicy="no-referrer" alt="img"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745742757951-8c32e8d7-bfed-4091-9c7e-01ca279ab0f6.png" referrerpolicy="no-referrer" alt="img"></p>
<p> 这个类的初始化方法__init__里面设置了两个模型，一个是ASR（自动语音识别），另一个是情感分类。 validate方法，接受audio_path作为参数。方法里面调用了两个管道（pipeline），分别处理语音识别和情感分类。 ASR模型用的是openai的whisper-small，应该能把音频转换成文本。情感分类模型是superb的hubert-base-superb-er，用于识别音频中的情感。这里使用了双重验证，<strong>语音识别</strong>： 调用<code>asr_pipe</code>处理音频，提取文本结果（<code>asr_result</code>）。例如，音频中的“我喜欢你”会被转换为对应的文本。<strong>情感分析</strong>： 调用<code>emotion_pipe</code>分析音频的情感，取置信度最高的情感标签（<code>emotion_result</code>）。例如，识别出情感为“happy”或“sad”。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745734061119-56d5f670-390a-431b-9592-5da072eae671.png" referrerpolicy="no-referrer" alt="null"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745734200811-bf323747-3dba-4963-bc95-bf4087564d68.png" referrerpolicy="no-referrer" alt="null"></p>
<p>生成以后再听一下就会发现确实存在混响效果<br><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745742394165-b7d3d2bb-168f-49ca-924a-e6311cf2e128.png" referrerpolicy="no-referrer" alt="img"></p>
<p>实验结果：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/44876878/1745743451588-cae4e921-d7a9-4666-8456-26dd31978799.png" referrerpolicy="no-referrer" alt="img"></p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a target="_blank" rel="noopener" href="https://arxiv.org/html/2504.01094v1">https://arxiv.org/html/2504.01094v1</a></p>
<p><a target="_blank" rel="noopener" href="https://arxiv.org/html/2405.08317">https://arxiv.org/html/2405.08317</a></p>
<p><a target="_blank" rel="noopener" href="https://forum.butian.net/share/3021">https://forum.butian.net/share/3021</a></p>
<p><a target="_blank" rel="noopener" href="https://www.51cto.com/article/788676.html">https://www.51cto.com/article/788676.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.secrss.com/articles/66205">https://www.secrss.com/articles/66205</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p><a href="http://example.com/2025/12/11/多语言和多口音音频大型语言模型的越狱攻击/">http://example.com/2025/12/11/多语言和多口音音频大型语言模型的越狱攻击/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Werqy3</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2025-12-11</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2025-12-11</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=6938dd3470fd5d0337653de1&amp;product=sop" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/" referrerpolicy="no-referrer" alt="支付宝"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><div class="notification is-danger">You forgot to set the <code>business</code> or <code>currency_code</code> for Paypal. Please set it in <code>_config.yml</code>.</div><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/" referrerpolicy="no-referrer" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2025/12/11/%E5%AE%9E%E6%88%98-SRC%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%86%E6%9E%90/"><i class="level-item fas fa-chevron-left"></i><span class="level-item"> </span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2025/12/11/%E6%8B%86%E8%A7%A3%E5%A4%A7%E6%A8%A1%E5%9E%8B%E2%80%9C%E8%B6%8A%E7%8B%B1%E2%80%9D%E6%94%BB%E5%87%BB%EF%BC%9A%E5%AF%B9%E6%8A%97%E6%A0%B7%E6%9C%AC%E5%A6%82%E4%BD%95%E6%92%95%E5%BC%80AI%E5%AE%89%E5%85%A8%E6%8A%A4%E6%A0%8F/"><span class="level-item"> </span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card" id="comments"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'http://example.com/2025/12/11/%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%92%8C%E5%A4%9A%E5%8F%A3%E9%9F%B3%E9%9F%B3%E9%A2%91%E5%A4%A7%E5%9E%8B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%B6%8A%E7%8B%B1%E6%94%BB%E5%87%BB/';
            this.page.identifier = '2025/12/11/多语言和多口音音频大型语言模型的越狱攻击/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'https-flypigc-github-io' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" referrerpolicy="no-referrer" alt="Werqy3"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Werqy3</p><p class="is-size-6 is-block">java | CTF竞赛解析 | 漏洞复现分析 | 红队渗透</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Hunan</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives/"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories/"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags/"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/flypigc" target="_blank" rel="me noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/flypigc"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="QQ" href="https://github.com/flypigc/flypigc.github.io/blob/main/static/QQ.jpg"><i class="fab fa-qq"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="WeChat" href="https://github.com/flypigc/flypigc.github.io/blob/main/static/WeChat.jpg"><i class="fab fa-weixin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://forum.butian.net/people/37237" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">奇安信攻防社区</span></span><span class="level-right"><span class="level-item tag">forum.butian.net</span></span></a></li><li><a class="level is-mobile" href="https://xz.aliyun.com/users/165806/news" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">先知社区</span></span><span class="level-right"><span class="level-item tag">xz.aliyun.com</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-12-11T07:04:17.887Z">2025-12-11</time></p><p class="title"><a href="/2025/12/11/React%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BB%84%E4%BB%B6%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%BC%8F%E6%B4%9E%EF%BC%88CVE-2025-55182%EF%BC%89/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-12-11T07:03:28.439Z">2025-12-11</time></p><p class="title"><a href="/2025/12/11/Spring%20MVC%E6%9E%B6%E6%9E%84%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%AE%9E%E6%88%98/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-12-11T07:02:48.806Z">2025-12-11</time></p><p class="title"><a href="/2025/12/11/Fastjson2%20RCE%20%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-12-11T07:01:17.922Z">2025-12-11</time></p><p class="title"><a href="/2025/12/11/JNDI%E6%B3%A8%E5%85%A5%E6%94%BB%E9%98%B2%E5%85%A8%E8%A7%A3%E6%9E%90/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-12-11T07:00:00.488Z">2025-12-11</time></p><p class="title"><a href="/2025/12/11/%E5%88%A9%E7%94%A8Tomcat%E9%85%8D%E7%BD%AE%E6%9C%BA%E5%88%B6%E5%AE%9E%E7%8E%B0JNDI%E6%B3%A8%E5%85%A5/"> </a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2025/12/"><span class="level-start"><span class="level-item">十二月 2025</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="test" data-ad-slot="test" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" referrerpolicy="no-referrer" alt="Werqy3&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2025 Werqy3</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2025</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script src="/js/pjax.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>